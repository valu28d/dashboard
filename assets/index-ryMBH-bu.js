const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BajUZiWW.js","assets/toUtf8.browser-CyauOOnS.js"])))=>i.map(i=>d[i]);
import{f as st,t as nt,c as it,H as G,e as O,_ as ot,h as U,S as me,n as L,i as pe,j as ne,k as at}from"./index-igOx3zyl.js";const ct=(t,e,r)=>{let s,n,i,o=!1;const c=async()=>{n||(n=t());try{s=await n,i=!0,o=!1}finally{n=void 0}return s};return async a=>((!i||a?.forceRefresh)&&(s=await c()),s)};var H;(function(t){t.HTTP="http",t.HTTPS="https"})(H||(H={}));var V;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(V||(V={}));const ie="__smithy_context",I=(t,e)=>{const r=[];if(t&&r.push(t),e)for(const s of e)r.push(s);return r},A=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,W=()=>{let t=[],e=[],r=!1;const s=new Set,n=u=>u.sort((l,h)=>ge[h.step]-ge[l.step]||ye[h.priority||"normal"]-ye[l.priority||"normal"]),i=u=>{let l=!1;const h=p=>{const g=I(p.name,p.aliases);if(g.includes(u)){l=!0;for(const m of g)s.delete(m);return!1}return!0};return t=t.filter(h),e=e.filter(h),l},o=u=>{let l=!1;const h=p=>{if(p.middleware===u){l=!0;for(const g of I(p.name,p.aliases))s.delete(g);return!1}return!0};return t=t.filter(h),e=e.filter(h),l},c=u=>(t.forEach(l=>{u.add(l.middleware,{...l})}),e.forEach(l=>{u.addRelativeTo(l.middleware,{...l})}),u.identifyOnResolve?.(f.identifyOnResolve()),u),a=u=>{const l=[];return u.before.forEach(h=>{h.before.length===0&&h.after.length===0?l.push(h):l.push(...a(h))}),l.push(u),u.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?l.push(h):l.push(...a(h))}),l},d=(u=!1)=>{const l=[],h=[],p={};return t.forEach(m=>{const y={...m,before:[],after:[]};for(const S of I(y.name,y.aliases))p[S]=y;l.push(y)}),e.forEach(m=>{const y={...m,before:[],after:[]};for(const S of I(y.name,y.aliases))p[S]=y;h.push(y)}),h.forEach(m=>{if(m.toMiddleware){const y=p[m.toMiddleware];if(y===void 0){if(u)return;throw new Error(`${m.toMiddleware} is not found when adding ${A(m.name,m.aliases)} middleware ${m.relation} ${m.toMiddleware}`)}m.relation==="after"&&y.after.push(m),m.relation==="before"&&y.before.push(m)}}),n(l).map(a).reduce((m,y)=>(m.push(...y),m),[])},f={add:(u,l={})=>{const{name:h,override:p,aliases:g}=l,m={step:"initialize",priority:"normal",middleware:u,...l},y=I(h,g);if(y.length>0){if(y.some(S=>s.has(S))){if(!p)throw new Error(`Duplicate middleware name '${A(h,g)}'`);for(const S of y){const b=t.findIndex(x=>x.name===S||x.aliases?.some(X=>X===S));if(b===-1)continue;const R=t[b];if(R.step!==m.step||m.priority!==R.priority)throw new Error(`"${A(R.name,R.aliases)}" middleware with ${R.priority} priority in ${R.step} step cannot be overridden by "${A(h,g)}" middleware with ${m.priority} priority in ${m.step} step.`);t.splice(b,1)}}for(const S of y)s.add(S)}t.push(m)},addRelativeTo:(u,l)=>{const{name:h,override:p,aliases:g}=l,m={middleware:u,...l},y=I(h,g);if(y.length>0){if(y.some(S=>s.has(S))){if(!p)throw new Error(`Duplicate middleware name '${A(h,g)}'`);for(const S of y){const b=e.findIndex(x=>x.name===S||x.aliases?.some(X=>X===S));if(b===-1)continue;const R=e[b];if(R.toMiddleware!==m.toMiddleware||R.relation!==m.relation)throw new Error(`"${A(R.name,R.aliases)}" middleware ${R.relation} "${R.toMiddleware}" middleware cannot be overridden by "${A(h,g)}" middleware ${m.relation} "${m.toMiddleware}" middleware.`);e.splice(b,1)}}for(const S of y)s.add(S)}e.push(m)},clone:()=>c(W()),use:u=>{u.applyToStack(f)},remove:u=>typeof u=="string"?i(u):o(u),removeByTag:u=>{let l=!1;const h=p=>{const{tags:g,name:m,aliases:y}=p;if(g&&g.includes(u)){const S=I(m,y);for(const b of S)s.delete(b);return l=!0,!1}return!0};return t=t.filter(h),e=e.filter(h),l},concat:u=>{const l=c(W());return l.use(u),l.identifyOnResolve(r||l.identifyOnResolve()||(u.identifyOnResolve?.()??!1)),l},applyToStack:c,identify:()=>d(!0).map(u=>{const l=u.step??u.relation+" "+u.toMiddleware;return A(u.name,u.aliases)+" - "+l}),identifyOnResolve(u){return typeof u=="boolean"&&(r=u),r},resolve:(u,l)=>{for(const h of d().map(p=>p.middleware).reverse())u=h(u,l);return r&&console.log(f.identify()),u}};return f},ge={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},ye={high:3,normal:2,low:1};class Os{config;middlewareStack=W();initConfig;handlers;constructor(e){this.config=e;const{protocol:r,protocolSettings:s}=e;s&&typeof r=="function"&&(e.protocol=new r(s))}send(e,r,s){const n=typeof r!="function"?r:void 0,i=typeof r=="function"?r:s,o=n===void 0&&this.config.cacheMiddleware===!0;let c;if(o){this.handlers||(this.handlers=new WeakMap);const a=this.handlers;a.has(e.constructor)?c=a.get(e.constructor):(c=e.resolveMiddleware(this.middlewareStack,this.config,n),a.set(e.constructor,c))}else delete this.handlers,c=e.resolveMiddleware(this.middlewareStack,this.config,n);if(i)c(e).then(a=>i(null,a.output),a=>i(a)).catch(()=>{});else return c(e).then(a=>a.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}const ut=t=>new TextEncoder().encode(t);class M extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?M.mutate(st(e)):M.mutate(ut(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,M.prototype),e}transformToString(e="utf-8"){return e==="base64"?nt(this):it(this)}}const Se=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return M.mutate(t);if(!t)return M.mutate(new Uint8Array);const r=e.streamCollector(t);return M.mutate(await r)},Q=t=>typeof t=="function"?t():t,B=t=>t[ie]||(t[ie]={}),$e=(t,e,r,s,n)=>({name:e,namespace:t,traits:r,input:s,output:n}),dt=t=>(e,r)=>async s=>{const{response:n}=await e(s),{operationSchema:i}=B(r),[,o,c,a,d,f]=i??[];try{const u=await t.protocol.deserializeResponse($e(o,c,a,d,f),{...t,...r},n);return{response:n,output:u}}catch(u){if(Object.defineProperty(u,"$response",{value:n,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in u)){const l="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{u.message+=`
  `+l}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(l):r.logger?.warn?.(l)}typeof u.$responseBodyText<"u"&&u.$response&&(u.$response.body=u.$responseBodyText);try{if(G.isInstance(n)){const{headers:h={}}=n,p=Object.entries(h);u.$metadata={httpStatusCode:n.statusCode,requestId:K(/^x-[\w-]+-request-?id$/,p),extendedRequestId:K(/^x-[\w-]+-id-2$/,p),cfId:K(/^x-[\w-]+-cf-id$/,p)}}}catch{}}throw u}},K=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],lt=t=>(e,r)=>async s=>{const{operationSchema:n}=B(r),[,i,o,c,a,d]=n??[],f=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,u=await t.protocol.serializeRequest($e(i,o,c,a,d),s.input,{...t,...r,endpoint:f});return e({...s,request:u})},ht={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},ft={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Is(t){return{applyToStack:e=>{e.add(lt(t),ft),e.add(dt(t),ht),t.protocol.setSerdeContext(t)}}}function $(t){if(typeof t=="object")return t;t=t|0;const e={};let r=0;for(const s of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[s]=1);return e}class E{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=E.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,r){this.ref=e,this.memberName=r;const s=[];let n=e,i=e;for(this._isMemberSchema=!1;Z(n);)s.push(n[1]),n=n[0],i=Q(n),this._isMemberSchema=!0;if(s.length>0){this.memberTraits={};for(let o=s.length-1;o>=0;--o){const c=s[o];Object.assign(this.memberTraits,$(c))}}else this.memberTraits=0;if(i instanceof E){const o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??i.memberName;return}if(this.schema=Q(i),mt(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){const r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){const r=Q(e);if(r instanceof E)return r;if(Z(r)){const[s,n]=r;if(s instanceof E)return Object.assign(s.getMergedTraits(),$(n)),s;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new E(r)}getSchema(){const e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){const{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){const e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){const e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){const e=this.getSchema();return e[0]===3||e[0]===-3}isBlobSchema(){const e=this.getSchema();return e===21||e===42}isTimestampSchema(){const e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){const{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){const e=i=>(i&4)===4||!!i?.idempotencyToken,{normalizedTraits:r,traits:s,memberTraits:n}=this;return e(r)||e(s)||e(n)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return $(this.memberTraits)}getOwnTraits(){return $(this.traits)}getKeySchema(){const[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);const s=this.getSchema(),n=e?15:s[4]??0;return N([n,0],"key")}getValueSchema(){const e=this.getSchema(),[r,s,n]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(s||n)?e[3+e[0]]:r?15:void 0;if(i!=null)return N([i,0],s?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){const r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){const s=r[4].indexOf(e),n=r[5][s];return N(Z(n)?n:[n,0],e)}if(this.isDocumentSchema())return N([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){const e={};try{for(const[r,s]of this.structIterator())e[r]=s}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(const[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");const e=this.getSchema();for(let r=0;r<e[4].length;++r)yield[e[4][r],N([e[5][r],0],e[4][r])]}}function N(t,e){if(t instanceof E)return Object.assign(t,{memberName:e,_isMemberSchema:!0});const r=E;return new r(t,e)}const Z=t=>Array.isArray(t)&&t.length===2,mt=t=>Array.isArray(t)&&t.length>=5;class v{namespace;schemas;exceptions;static registries=new Map;constructor(e,r=new Map,s=new Map){this.namespace=e,this.schemas=r,this.exceptions=s}static for(e){return v.registries.has(e)||v.registries.set(e,new v(e)),v.registries.get(e)}register(e,r){const s=this.normalizeShapeId(e);v.for(s.split("#")[0]).schemas.set(s,r)}getSchema(e){const r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){const s=e,n=v.for(s[1]);n.schemas.set(s[1]+"#"+s[2],s),n.exceptions.set(s,r)}getErrorCtor(e){const r=e;return v.for(r[1]).exceptions.get(r)}getBaseException(){for(const e of this.exceptions.keys())if(Array.isArray(e)){const[,r,s]=e,n=r+"#"+s;if(n.startsWith("smithy.ts.sdk.synthetic.")&&n.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}}const we=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),w=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),pt=()=>{if(we)return we();const t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,w[t[0]]+w[t[1]]+w[t[2]]+w[t[3]]+"-"+w[t[4]]+w[t[5]]+"-"+w[t[6]]+w[t[7]]+"-"+w[t[8]]+w[t[9]]+"-"+w[t[10]]+w[t[11]]+w[t[12]]+w[t[13]]+w[t[14]]+w[t[15]]},P=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};P.from=t=>t&&typeof t=="object"&&(t instanceof P||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?P(String(t)):P(JSON.stringify(t));P.fromObject=P.from;const Ee=/^-?\d*(\.\d+)?$/;class De{string;type;constructor(e,r){if(this.string=e,this.type=r,!Ee.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;const r=e;return De.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&Ee.test(r.string)}}class gt{serdeContext;setSerdeContext(e){this.serdeContext=e}}class yt extends gt{options;constructor(e){super(),this.options=e}getRequestType(){return O}getResponseType(){return G}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,r){if("url"in r){e.protocol=r.url.protocol,e.hostname=r.url.hostname,e.port=r.url.port?Number(r.url.port):void 0,e.path=r.url.pathname,e.fragment=r.url.hash||void 0,e.username=r.url.username||void 0,e.password=r.url.password||void 0,e.query||(e.query={});for(const[s,n]of r.url.searchParams.entries())e.query[s]=n;return e}else return e.protocol=r.protocol,e.hostname=r.hostname,e.port=r.port?Number(r.port):void 0,e.path=r.path,e.query={...r.query},e}setHostPrefix(e,r,s){const n=E.of(r.input),i=$(r.traits??{});if(i.endpoint){let o=i.endpoint?.[0];if(typeof o=="string"){const c=[...n.structIterator()].filter(([,a])=>a.getMergedTraits().hostLabel);for(const[a]of c){const d=s[a];if(typeof d!="string")throw new Error(`@smithy/core/schema - ${a} in input must be a string as hostLabel.`);o=o.replace(`{${a}}`,d)}e.hostname=o+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:s}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:r,initialRequest:s})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:s}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:s})}async loadEventStreamCapability(){const{EventStreamSerde:e}=await ot(async()=>{const{EventStreamSerde:r}=await import("./index-BajUZiWW.js");return{EventStreamSerde:r}},__vite__mapDeps([0,1]));return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,r,s,n,i){return[]}getEventStreamMarshaller(){const e=this.serdeContext;if(!e.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return e.eventStreamMarshaller}}class Ms extends yt{async serializeRequest(e,r,s){const n=this.serializer,i={},o={},c=await s.endpoint(),a=E.of(e?.input),d=a.getSchema();let f;const u=new O({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:i,headers:o,body:void 0});c&&(this.updateServiceEndpoint(u,c),this.setHostPrefix(u,e,r));const l={...r};if(r){const h=a.getEventStreamMember();if(h){if(l[h]){const p={};for(const[g,m]of a.structIterator())g!==h&&l[g]&&(n.write(m,l[g]),p[g]=n.flush());f=await this.serializeEventStream({eventStream:l[h],requestSchema:a,initialRequest:p})}}else n.write(d,l),f=n.flush()}return u.headers=o,u.query=i,u.body=f,u.method="POST",u}async deserializeResponse(e,r,s){const n=this.deserializer,i=E.of(e.output),o={};if(s.statusCode>=300){const a=await Se(s.body,r);throw a.byteLength>0&&Object.assign(o,await n.read(15,a)),await this.handleError(e,r,s,o,this.deserializeMetadata(s)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(const a in s.headers){const d=s.headers[a];delete s.headers[a],s.headers[a.toLowerCase()]=d}const c=i.getEventStreamMember();if(c)o[c]=await this.deserializeEventStream({response:s,responseSchema:i,initialResponseContainer:o});else{const a=await Se(s.body,r);a.byteLength>0&&Object.assign(o,await n.read(i,a))}return o.$metadata=this.deserializeMetadata(s),o}}function Ps(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();const{httpLabel:r,httpPrefixHeaders:s,httpHeader:n,httpQuery:i}=t.getMergedTraits();return(e.httpBindings?typeof s=="string"||n?6:i||r?5:void 0:void 0)??e.timestampFormat.default}const ee="***SensitiveInformation***";function oe(t,e){if(e==null)return e;const r=E.of(t);if(r.getMergedTraits().sensitive)return ee;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return ee}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return ee}else if(r.isStructSchema()&&typeof e=="object"){const s=e,n={};for(const[i,o]of r.structIterator())s[i]!=null&&(n[i]=oe(o,s[i]));return n}return e}class St{middlewareStack=W();schema;static classBuilder(){return new wt}resolveMiddlewareWithContext(e,r,s,{middlewareFn:n,clientName:i,commandName:o,inputFilterSensitiveLog:c,outputFilterSensitiveLog:a,smithyContext:d,additionalContext:f,CommandCtor:u}){for(const m of n.bind(this)(u,e,r,s))this.middlewareStack.use(m);const l=e.concat(this.middlewareStack),{logger:h}=r,p={logger:h,clientName:i,commandName:o,inputFilterSensitiveLog:c,outputFilterSensitiveLog:a,[ie]:{commandInstance:this,...d},...f},{requestHandler:g}=r;return l.resolve(m=>g.handle(m.request,s||{}),p)}}class wt{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,s={}){return this._smithyContext={service:e,operation:r,...s},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=s=>s,r=s=>s){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let r;return r=class extends St{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[s]){super(),this.input=s??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(s,n,i){const o=e._operationSchema,c=o?.[4]??o?.input,a=o?.[5]??o?.output;return this.resolveMiddlewareWithContext(s,n,i,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(o?oe.bind(null,c):d=>d),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(o?oe.bind(null,a):d=>d),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}}class D extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const r=e;return D.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;const r=e;return this===D?D.isInstance(e):D.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}}const Re=(t,e={})=>{Object.entries(e).filter(([,s])=>s!==void 0).forEach(([s,n])=>{(t[s]==null||t[s]==="")&&(t[s]=n)});const r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},ks=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Et=t=>{const e=[];for(const r in V){const s=V[r];t[s]!==void 0&&e.push({algorithmId:()=>s,checksumConstructor:()=>t[s]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},Rt=t=>{const e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},Tt=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),bt=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},xs=t=>Object.assign(Et(t),Tt(t)),Ns=t=>Object.assign(Rt(t),bt(t));class Ct{trace(){}debug(){}info(){}warn(){}error(){}}const vt=(t,e)=>{if(!e||e.length===0)return t;const r=[];for(const s of e)for(const n of t)n.schemeId.split("#")[1]===s&&r.push(n);for(const s of t)r.find(({schemeId:n})=>n===s.schemeId)||r.push(s);return r};function At(t){const e=new Map;for(const r of t)e.set(r.schemeId,r);return e}const _t=(t,e)=>(r,s)=>async n=>{const i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,s,n.input)),o=t.authSchemePreference?await t.authSchemePreference():[],c=vt(i,o),a=At(t.httpAuthSchemes),d=B(s),f=[];for(const u of c){const l=a.get(u.schemeId);if(!l){f.push(`HttpAuthScheme \`${u.schemeId}\` was not enabled for this service.`);continue}const h=l.identityProvider(await e.identityProviderConfigProvider(t));if(!h){f.push(`HttpAuthScheme \`${u.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:p={},signingProperties:g={}}=u.propertiesExtractor?.(t,s)||{};u.identityProperties=Object.assign(u.identityProperties||{},p),u.signingProperties=Object.assign(u.signingProperties||{},g),d.selectedHttpAuthScheme={httpAuthOption:u,identity:await h(u.identityProperties),signer:l.signer};break}if(!d.selectedHttpAuthScheme)throw new Error(f.join(`
`));return r(n)},Ot={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},$s=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:s=>{s.addRelativeTo(_t(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),Ot)}}),It={name:"serializerMiddleware"},Mt=t=>e=>{throw e},Pt=(t,e)=>{},kt=t=>(e,r)=>async s=>{if(!O.isInstance(s.request))return e(s);const i=B(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:c,signer:a}=i,d=await e({...s,request:await a.sign(s.request,c,o)}).catch((a.errorHandler||Mt)(o));return(a.successHandler||Pt)(d.response,o),d},xt={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Ds=t=>({applyToStack:e=>{e.addRelativeTo(kt(),xt)}});function Nt(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}class Us{authSchemes=new Map;constructor(e){for(const[r,s]of Object.entries(e))s!==void 0&&this.authSchemes.set(r,s)}getIdentityProvider(e){return this.authSchemes.get(e)}}class Ls{async sign(e,r,s){return e}}const $t=t=>function(r){return Ue(r)&&r.expiration.getTime()-Date.now()<t},Dt=3e5,Ut=$t(Dt),Ue=t=>t.expiration!==void 0,Lt=(t,e,r)=>{if(t===void 0)return;const s=typeof t!="function"?async()=>Promise.resolve(t):t;let n,i,o,c=!1;const a=async d=>{i||(i=s(d));try{n=await i,o=!0,c=!1}finally{i=void 0}return n};return e===void 0?async d=>((!o||d?.forceRefresh)&&(n=await a(d)),n):async d=>((!o||d?.forceRefresh)&&(n=await a(d)),c?n:r(n)?(e(n)&&await a(d),n):(c=!0,n))};function zs(t){return t}const zt=t=>e=>async r=>{if(!O.isInstance(r.request))return e(r);const{request:s}=r,{handlerProtocol:n=""}=t.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!s.headers[":authority"])delete s.headers.host,s.headers[":authority"]=s.hostname+(s.port?":"+s.port:"");else if(!s.headers.host){let i=s.hostname;s.port!=null&&(i+=`:${s.port}`),s.headers.host=i}return e(r)},Ht={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Hs=t=>({applyToStack:e=>{e.add(zt(t),Ht)}}),Ft=()=>(t,e)=>async r=>{try{const s=await t(r),{clientName:n,commandName:i,logger:o,dynamoDbDocumentClientOptions:c={}}=e,{overrideInputFilterSensitiveLog:a,overrideOutputFilterSensitiveLog:d}=c,f=a??e.inputFilterSensitiveLog,u=d??e.outputFilterSensitiveLog,{$metadata:l,...h}=s.output;return o?.info?.({clientName:n,commandName:i,input:f(r.input),output:u(h),metadata:l}),s}catch(s){const{clientName:n,commandName:i,logger:o,dynamoDbDocumentClientOptions:c={}}=e,{overrideInputFilterSensitiveLog:a}=c,d=a??e.inputFilterSensitiveLog;throw o?.error?.({clientName:n,commandName:i,input:d(r.input),error:s,metadata:s.$metadata}),s}},Bt={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Fs=t=>({applyToStack:e=>{e.add(Ft(),Bt)}}),qt={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},jt=()=>t=>async e=>t(e),Bs=t=>({applyToStack:e=>{e.add(jt(),qt)}}),Vt=void 0;function Wt(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function qs(t){const e=U(t.userAgentAppId??Vt),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{const s=await e();if(!Wt(s)){const n=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof s!="string"?n?.warn("userAgentAppId must be a string or undefined."):s.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return s}})}class js{capacity;data=new Map;parameters=[];constructor({size:e,params:r}){this.capacity=e??50,r&&(this.parameters=r)}get(e,r){const s=this.hash(e);if(s===!1)return r();if(!this.data.has(s)){if(this.data.size>this.capacity+10){const n=this.data.keys();let i=0;for(;;){const{value:o,done:c}=n.next();if(this.data.delete(o),c||++i>10)break}}this.data.set(s,r())}return this.data.get(s)}size(){return this.data.size}hash(e){let r="";const{parameters:s}=this;if(s.length===0)return!1;for(const n of s){const i=String(e[n]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}}const Gt=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Le=t=>Gt.test(t)||t.startsWith("[")&&t.endsWith("]"),Yt=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Y=(t,e=!1)=>{if(!e)return Yt.test(t);const r=t.split(".");for(const s of r)if(!Y(s))return!1;return!0},ae={},F="endpoints";function _(t){return typeof t!="object"||t==null?t:"ref"in t?`$${_(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(_).join(", ")})`:JSON.stringify(t,null,2)}class T extends Error{constructor(e){super(e),this.name="EndpointError"}}const Jt=(t,e)=>t===e,Xt=t=>{const e=t.split("."),r=[];for(const s of e){const n=s.indexOf("[");if(n!==-1){if(s.indexOf("]")!==s.length-1)throw new T(`Path: '${t}' does not end with ']'`);const i=s.slice(n+1,-1);if(Number.isNaN(parseInt(i)))throw new T(`Invalid array index: '${i}' in path: '${t}'`);n!==0&&r.push(s.slice(0,n)),r.push(i)}else r.push(s)}return r},ze=(t,e)=>Xt(e).reduce((r,s)=>{if(typeof r!="object")throw new T(`Index '${s}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(s)]:r[s]},t),Qt=t=>t!=null,Kt=t=>!t,te={[H.HTTP]:80,[H.HTTPS]:443},Zt=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:l,port:h,protocol:p="",path:g="",query:m={}}=t,y=new URL(`${p}//${l}${h?`:${h}`:""}${g}`);return y.search=Object.entries(m).map(([S,b])=>`${S}=${b}`).join("&"),y}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const r=e.href,{host:s,hostname:n,pathname:i,protocol:o,search:c}=e;if(c)return null;const a=o.slice(0,-1);if(!Object.values(H).includes(a))return null;const d=Le(n),f=r.includes(`${s}:${te[a]}`)||typeof t=="string"&&t.includes(`${s}:${te[a]}`),u=`${s}${f?`:${te[a]}`:""}`;return{scheme:a,authority:u,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:d}},er=(t,e)=>t===e,tr=(t,e,r,s)=>e>=r||t.length<r?null:s?t.substring(t.length-r,t.length-e):t.substring(e,r),rr=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),sr={booleanEquals:Jt,getAttr:ze,isSet:Qt,isValidHostLabel:Y,not:Kt,parseURL:Zt,stringEquals:er,substring:tr,uriEncode:rr},He=(t,e)=>{const r=[],s={...e.endpointParams,...e.referenceRecord};let n=0;for(;n<t.length;){const i=t.indexOf("{",n);if(i===-1){r.push(t.slice(n));break}r.push(t.slice(n,i));const o=t.indexOf("}",i);if(o===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(r.push(t.slice(i+1,o)),n=o+2);const c=t.substring(i+1,o);if(c.includes("#")){const[a,d]=c.split("#");r.push(ze(s[a],d))}else r.push(s[c]);n=o+1}return r.join("")},nr=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],J=(t,e,r)=>{if(typeof t=="string")return He(t,r);if(t.fn)return Be.callFunction(t,r);if(t.ref)return nr(t,r);throw new T(`'${e}': ${String(t)} is not a string, function or reference.`)},Fe=({fn:t,argv:e},r)=>{const s=e.map(i=>["boolean","number"].includes(typeof i)?i:Be.evaluateExpression(i,"arg",r)),n=t.split(".");return n[0]in ae&&n[1]!=null?ae[n[0]][n[1]](...s):sr[t](...s)},Be={evaluateExpression:J,callFunction:Fe},ir=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new T(`'${t}' is already defined in Reference Record.`);const s=Fe(e,r);return r.logger?.debug?.(`${F} evaluateCondition: ${_(e)} = ${_(s)}`),{result:s===""?!0:!!s,...t!=null&&{toAssign:{name:t,value:s}}}},le=(t=[],e)=>{const r={};for(const s of t){const{result:n,toAssign:i}=ir(s,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!n)return{result:n};i&&(r[i.name]=i.value,e.logger?.debug?.(`${F} assign: ${i.name} := ${_(i.value)}`))}return{result:!0,referenceRecord:r}},or=(t,e)=>Object.entries(t).reduce((r,[s,n])=>({...r,[s]:n.map(i=>{const o=J(i,"Header value entry",e);if(typeof o!="string")throw new T(`Header '${s}' value '${o}' is not a string`);return o})}),{}),qe=(t,e)=>Object.entries(t).reduce((r,[s,n])=>({...r,[s]:Ve.getEndpointProperty(n,e)}),{}),je=(t,e)=>{if(Array.isArray(t))return t.map(r=>je(r,e));switch(typeof t){case"string":return He(t,e);case"object":if(t===null)throw new T(`Unexpected endpoint property: ${t}`);return Ve.getEndpointProperties(t,e);case"boolean":return t;default:throw new T(`Unexpected endpoint property type: ${typeof t}`)}},Ve={getEndpointProperty:je,getEndpointProperties:qe},ar=(t,e)=>{const r=J(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(s){throw console.error(`Failed to construct URL with ${r}`,s),s}throw new T(`Endpoint URL must be a string, got ${typeof r}`)},cr=(t,e)=>{const{conditions:r,endpoint:s}=t,{result:n,referenceRecord:i}=le(r,e);if(!n)return;const o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:c,properties:a,headers:d}=s;return e.logger?.debug?.(`${F} Resolving endpoint from template: ${_(s)}`),{...d!=null&&{headers:or(d,o)},...a!=null&&{properties:qe(a,o)},url:ar(c,o)}},ur=(t,e)=>{const{conditions:r,error:s}=t,{result:n,referenceRecord:i}=le(r,e);if(n)throw new T(J(s,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},We=(t,e)=>{for(const r of t)if(r.type==="endpoint"){const s=cr(r,e);if(s)return s}else if(r.type==="error")ur(r,e);else if(r.type==="tree"){const s=Ge.evaluateTreeRule(r,e);if(s)return s}else throw new T(`Unknown endpoint rule: ${r}`);throw new T("Rules evaluation failed")},dr=(t,e)=>{const{conditions:r,rules:s}=t,{result:n,referenceRecord:i}=le(r,e);if(n)return Ge.evaluateRules(s,{...e,referenceRecord:{...e.referenceRecord,...i}})},Ge={evaluateRules:We,evaluateTreeRule:dr},Vs=(t,e)=>{const{endpointParams:r,logger:s}=e,{parameters:n,rules:i}=t;e.logger?.debug?.(`${F} Initial EndpointParams: ${_(r)}`);const o=Object.entries(n).filter(([,d])=>d.default!=null).map(([d,f])=>[d,f.default]);if(o.length>0)for(const[d,f]of o)r[d]=r[d]??f;const c=Object.entries(n).filter(([,d])=>d.required).map(([d])=>d);for(const d of c)if(r[d]==null)throw new T(`Missing required parameter: '${d}'`);const a=We(i,{endpointParams:r,logger:s,referenceRecord:{}});return e.logger?.debug?.(`${F} Resolved endpoint: ${_(a)}`),a},Ye=(t,e=!1)=>{if(e){for(const r of t.split("."))if(!Ye(r))return!1;return!0}return!(!Y(t)||t.length<3||t.length>63||t!==t.toLowerCase()||Le(t))},Te=":",lr="/",hr=t=>{const e=t.split(Te);if(e.length<6)return null;const[r,s,n,i,o,...c]=e;if(r!=="arn"||s===""||n===""||c.join(Te)==="")return null;const a=c.map(d=>d.split(lr)).flat();return{partition:s,service:n,region:i,accountId:o,resourceId:a}},fr=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],mr={partitions:fr};let pr=mr;const gr=t=>{const{partitions:e}=pr;for(const s of e){const{regions:n,outputs:i}=s;for(const[o,c]of Object.entries(n))if(o===t)return{...i,...c}}for(const s of e){const{regionRegex:n,outputs:i}=s;if(new RegExp(n).test(t))return{...i}}const r=e.find(s=>s.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},yr={isVirtualHostableS3Bucket:Ye,parseArn:hr,partition:gr};ae.aws=yr;function Sr(t){const e={};if(t=t.replace(/^\?/,""),t)for(const r of t.split("&")){let[s,n=null]=r.split("=");s=decodeURIComponent(s),n&&(n=decodeURIComponent(n)),s in e?Array.isArray(e[s])?e[s].push(n):e[s]=[e[s],n]:e[s]=n}return e}const ce=t=>{if(typeof t=="string")return ce(new URL(t));const{hostname:e,pathname:r,port:s,protocol:n,search:i}=t;let o;return i&&(o=Sr(i)),{hostname:e,port:s?parseInt(s):void 0,protocol:n,path:r,query:o}};function wr(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}function C(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}const be=t=>G.isInstance(t)?t.headers?.date??t.headers?.Date:void 0,Je=t=>new Date(Date.now()+t),Er=(t,e)=>Math.abs(Je(e).getTime()-t)>=3e5,Ce=(t,e)=>{const r=Date.parse(t);return Er(r,e)?r-Date.now():e},z=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},Rr=async t=>{const e=z("context",t.context),r=z("config",t.config),s=e.endpointV2?.properties?.authSchemes?.[0],i=await z("signer",r.signer)(s),o=t?.signingRegion,c=t?.signingRegionSet,a=t?.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:c,signingName:a}};class Ws{async sign(e,r,s){if(!O.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const n=await Rr(s),{config:i,signer:o}=n;let{signingRegion:c,signingName:a}=n;const d=s.context;if(d?.authSchemes?.length??!1){const[u,l]=d.authSchemes;u?.name==="sigv4a"&&l?.name==="sigv4"&&(c=l?.signingRegion??c,a=l?.signingName??a)}return await o.sign(e,{signingDate:Je(i.systemClockOffset),signingRegion:c,signingService:a})}errorHandler(e){return r=>{const s=r.ServerTime??be(r.$response);if(s){const n=z("config",e.config),i=n.systemClockOffset;n.systemClockOffset=Ce(s,n.systemClockOffset),n.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){const s=be(e);if(s){const n=z("config",r.config);n.systemClockOffset=Ce(s,n.systemClockOffset)}}}const Gs=t=>{let e=t.credentials,r=!!t.credentials,s;Object.defineProperty(t,"credentials",{set(d){d&&d!==e&&d!==s&&(r=!0),e=d;const f=Tr(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),u=br(t,f);r&&!u.attributed?(s=async l=>u(l).then(h=>wr(h,"CREDENTIALS_CODE","e")),s.memoized=u.memoized,s.configBound=u.configBound,s.attributed=!0):s=u},get(){return s},enumerable:!0,configurable:!0}),t.credentials=e;const{signingEscapePath:n=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t;let c;return t.signer?c=U(t.signer):t.regionInfoProvider?c=()=>U(t.region)().then(async d=>[await t.regionInfoProvider(d,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},d]).then(([d,f])=>{const{signingRegion:u,signingService:l}=d;t.signingRegion=t.signingRegion||u||f,t.signingName=t.signingName||l||t.serviceId;const h={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:n},p=t.signerConstructor||me;return new p(h)}):c=async d=>{d=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await U(t.region)(),properties:{}},d);const f=d.signingRegion,u=d.signingName;t.signingRegion=t.signingRegion||f,t.signingName=t.signingName||u||t.serviceId;const l={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:n},h=t.signerConstructor||me;return new h(l)},Object.assign(t,{systemClockOffset:i,signingEscapePath:n,signer:c})};function Tr(t,{credentials:e,credentialDefaultProvider:r}){let s;return e?e?.memoized?s=e:s=Lt(e,Ut,Ue):r?s=U(r(Object.assign({},t,{parentClientConfig:t}))):s=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},s.memoized=!0,s}function br(t,e){if(e.configBound)return e;const r=async s=>e({...s,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}const ve=typeof TextEncoder=="function"?new TextEncoder:null,Ys=t=>{if(typeof t=="string"){if(ve)return ve.encode(t).byteLength;let e=t.length;for(let r=e-1;r>=0;r--){const s=t.charCodeAt(r);s>127&&s<=2047?e++:s>2047&&s<=65535&&(e+=2),s>=56320&&s<=57343&&r--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)};class Js{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,r){const s=r.getMemberSchemas(),n=Object.values(s).find(i=>!!i.getMergedTraits().httpPayload);if(n){const i=n.getMergedTraits().mediaType;return i||(n.isStringSchema()?"text/plain":n.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(s).find(o=>{const{httpQuery:c,httpQueryParams:a,httpHeader:d,httpLabel:f,httpPrefixHeaders:u}=o.getMergedTraits();return!c&&!a&&!d&&!f&&u===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,s,n,i,o){let c=r,a=e;e.includes("#")&&([c,a]=e.split("#"));const d={$metadata:i,$fault:s.statusCode<500?"client":"server"},f=v.for(c);try{return{errorSchema:o?.(f,a)??f.getSchema(e),errorMetadata:d}}catch{n.message=n.message??n.Message??"UnknownError";const l=v.for("smithy.ts.sdk.synthetic."+c),h=l.getBaseException();if(h){const p=l.getErrorCtor(h)??Error;throw this.decorateServiceException(Object.assign(new p({name:a}),d),n)}throw this.decorateServiceException(Object.assign(new Error(a),d),n)}}decorateServiceException(e,r={}){if(this.queryCompat){const s=e.Message??r.Message,n=Re(e,r);s&&(n.message=s),n.Error={...n.Error,Type:n.Error.Type,Code:n.Error.Code,Message:n.Error.message??n.Error.Message??s};const i=n.$metadata.requestId;return i&&(n.RequestId=i),n}return Re(e,r)}setQueryCompatError(e,r){const s=r.headers?.["x-amzn-query-error"];if(e!==void 0&&s!=null){const[n,i]=s.split(";"),o=Object.entries(e),c={Code:n,Type:i};Object.assign(e,c);for(const[a,d]of o)c[a==="message"?"Message":a]=d;delete c.__type,e.Error=c}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}findQueryCompatibleError(e,r){try{return e.getSchema(r)}catch{return e.find(n=>E.of(n).getMergedTraits().awsQueryError?.[0]===r)}}}class Xs{serdeContext;setSerdeContext(e){this.serdeContext=e}}function*Qs(t,e){if(t.isUnitSchema())return;const r=t.getSchema();for(let s=0;s<r[4].length;++s){const n=r[4][s],i=r[5][s],o=new E([i,0],n);!(n in e)&&!o.isIdempotencyToken()||(yield[n,o])}}function*Ks(t,e,r){if(t.isUnitSchema())return;const s=t.getSchema();let n=Object.keys(e).filter(i=>i!=="__type").length;for(let i=0;i<s[4].length&&n!==0;++i){const o=s[4][i],c=s[5][i],a=new E([c,0],o);let d=o;r&&(d=a.getMergedTraits()[r]??o),d in e&&(yield[o,a],n-=1)}}const Zs=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)},Cr=/\d{12}\.ddb/;async function vr(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&C(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const i=await e.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?C(t,"RETRY_MODE_ADAPTIVE","F"):C(t,"RETRY_MODE_STANDARD","E"):C(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const i=t.endpointV2;switch(String(i?.url?.hostname).match(Cr)&&C(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":C(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":C(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":C(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const n=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(n?.$source){const i=n;i.accountId&&C(t,"RESOLVED_ACCOUNT_ID","T");for(const[o,c]of Object.entries(i.$source??{}))C(t,o,c)}}const Ae="user-agent",re="x-amz-user-agent",_e=" ",se="/",Ar=/[^!$%&'*+\-.^_`|~\w]/g,_r=/[^!$%&'*+\-.^_`|~\w#]/g,Oe="-",Or=1024;function Ir(t){let e="";for(const r in t){const s=t[r];if(e.length+s.length+1<=Or){e.length?e+=","+s:e+=s;continue}break}return e}const Mr=t=>(e,r)=>async s=>{const{request:n}=s;if(!O.isInstance(n))return e(s);const{headers:i}=n,o=r?.userAgent?.map(q)||[],c=(await t.defaultUserAgentProvider()).map(q);await vr(r,t,s);const a=r;c.push(`m/${Ir(Object.assign({},r.__smithy_context?.features,a.__aws_sdk_context?.features))}`);const d=t?.customUserAgent?.map(q)||[],f=await t.userAgentAppId();f&&c.push(q(["app",`${f}`]));const u=[].concat([...c,...o,...d]).join(_e),l=[...c.filter(h=>h.startsWith("aws-sdk-")),...d].join(_e);return t.runtime!=="browser"?(l&&(i[re]=i[re]?`${i[Ae]} ${l}`:l),i[Ae]=u):i[re]=u,e({...s,request:n})},q=t=>{const e=t[0].split(se).map(o=>o.replace(Ar,Oe)).join(se),r=t[1]?.replace(_r,Oe),s=e.indexOf(se),n=e.substring(0,s);let i=e.substring(s+1);return n==="api"&&(i=i.toLowerCase()),[n,i,r].filter(o=>o&&o.length>0).reduce((o,c,a)=>{switch(a){case 0:return c;case 1:return`${o}/${c}`;default:return`${o}#${c}`}},"")},Pr={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},en=t=>({applyToStack:e=>{e.add(Mr(t),Pr)}}),tn=!1,rn=!1,Ie=new Set,kr=(t,e=Y)=>{if(!Ie.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else Ie.add(t)},Xe=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),xr=t=>Xe(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,sn=t=>{const{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{const s=typeof e=="function"?await e():e,n=xr(s);return kr(n),n},useFipsEndpoint:async()=>{const s=typeof e=="string"?e:await e();return Xe(s)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},Me="content-length";function Nr(t){return e=>async r=>{const s=r.request;if(O.isInstance(s)){const{body:n,headers:i}=s;if(n&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(Me)===-1)try{const o=t(n);s.headers={...s.headers,[Me]:String(o)}}catch{}}return e({...r,request:s})}}const $r={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},nn=t=>({applyToStack:e=>{e.add(Nr(t.bodyLengthChecker),$r)}}),Dr=async t=>{const e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Fr(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Hr(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},Ur=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Lr=/(\d+\.){3}\d+/,zr=/\.\./,Hr=t=>Ur.test(t)&&!Lr.test(t)&&!zr.test(t),Fr=t=>{const[e,r,s,,,n]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&r&&s&&n);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},Br=(t,e,r,s=!1)=>{const n=async()=>{let i;return s?i=r.clientContextParams?.[t]??r[t]??r[e]:i=r[t]??r[e],typeof i=="function"?i():i};return t==="credentialScope"||e==="CredentialScope"?async()=>{const i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.credentialScope??i?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{const i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.accountId??i?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;const i=await n();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){const{protocol:o,hostname:c,port:a,path:d}=i;return`${o}//${c}${a?":"+a:""}${d}`}}return i}:n},Qe=async t=>{},Ke=t=>typeof t=="object"?"url"in t?ce(t.url):t:ce(t),qr=async(t,e,r,s)=>{if(!r.isCustomEndpoint){let o;r.serviceConfiguredEndpoint?o=await r.serviceConfiguredEndpoint():o=await Qe(r.serviceId),o&&(r.endpoint=()=>Promise.resolve(Ke(o)),r.isCustomEndpoint=!0)}const n=await jr(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(n,s)},jr=async(t,e,r)=>{const s={},n=e?.getEndpointParameterInstructions?.()||{};for(const[i,o]of Object.entries(n))switch(o.type){case"staticContextParams":s[i]=o.value;break;case"contextParams":s[i]=t[o.name];break;case"clientContextParams":case"builtInParams":s[i]=await Br(o.name,i,r,o.type!=="builtInParams")();break;case"operationContextParams":s[i]=o.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(n).length===0&&Object.assign(s,r),String(r.serviceId).toLowerCase()==="s3"&&await Dr(s),s},Vr=({config:t,instructions:e})=>(r,s)=>async n=>{t.isCustomEndpoint&&Nt(s,"ENDPOINT_OVERRIDE","N");const i=await qr(n.input,{getEndpointParameterInstructions(){return e}},{...t},s);s.endpointV2=i,s.authSchemes=i.properties?.authSchemes;const o=s.authSchemes?.[0];if(o){s.signing_region=o.signingRegion,s.signing_service=o.signingName;const a=B(s)?.selectedHttpAuthScheme?.httpAuthOption;a&&(a.signingProperties=Object.assign(a.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...n})},Wr={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:It.name},on=(t,e)=>({applyToStack:r=>{r.addRelativeTo(Vr({config:t,instructions:e}),Wr)}}),an=t=>{const e=t.tls??!0,{endpoint:r,useDualstackEndpoint:s,useFipsEndpoint:n}=t,i=r!=null?async()=>Ke(await L(r)()):void 0,c=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:L(s??!1),useFipsEndpoint:L(n??!1)});let a;return c.serviceConfiguredEndpoint=async()=>(t.serviceId&&!a&&(a=Qe(t.serviceId)),a),c};var k;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(k||(k={}));const ue=3,cn=k.STANDARD,Gr=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Yr=["TimeoutError","RequestTimeout","RequestTimeoutException"],Jr=[500,502,503,504],Xr=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Qr=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],Kr=t=>t?.$retryable!==void 0,Zr=t=>t.$metadata?.clockSkewCorrected,es=t=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},Ze=t=>t.$metadata?.httpStatusCode===429||Gr.includes(t.name)||t.$retryable?.throttling==!0,he=(t,e=0)=>Kr(t)||Zr(t)||Yr.includes(t.name)||Xr.includes(t?.code||"")||Qr.includes(t?.code||"")||Jr.includes(t.$metadata?.httpStatusCode||0)||es(t)||t.cause!==void 0&&e<=10&&he(t.cause,e+1),ts=t=>{if(t.$metadata?.httpStatusCode!==void 0){const e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!he(t)}return!1};class fe{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(s=>fe.setTimeoutFn(s,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),Ze(e)){const n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());const s=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(s)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){const s=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(s*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}}const de=100,et=20*1e3,rs=500,Pe=500,ss=5,ns=10,is=1,os="amz-sdk-invocation-id",as="amz-sdk-request",cs=()=>{let t=de;return{computeNextBackoffDelay:s=>Math.floor(Math.min(et,Math.random()*2**s*t)),setDelayBase:s=>{t=s}}},ke=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(et,t),getRetryCost:()=>r});class tt{maxAttempts;mode=k.STANDARD;capacity=Pe;retryBackoffStrategy=cs();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return ke({retryDelay:de,retryCount:0})}async refreshRetryTokenForRetry(e,r){const s=await this.getMaxAttempts();if(this.shouldRetry(e,r,s)){const n=r.errorType;this.retryBackoffStrategy.setDelayBase(n==="THROTTLING"?rs:de);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,c=this.getCapacityCost(n);return this.capacity-=c,ke({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:c})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(Pe,this.capacity+(e.getRetryCost()??is))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${ue}`),ue}}shouldRetry(e,r,s){return e.getRetryCount()+1<s&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?ns:ss}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class us{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=k.ADAPTIVE;constructor(e,r){this.maxAttemptsProvider=e;const{rateLimiter:s}=r??{};this.rateLimiter=s??new fe,this.standardRetryStrategy=new tt(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}const ds=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),un=t=>{const{retryStrategy:e,retryMode:r,maxAttempts:s}=t,n=L(s??ue);return Object.assign(t,{maxAttempts:n,retryStrategy:async()=>e||(await L(r)()===k.ADAPTIVE?new us(n):new tt(n))})},ls=t=>t?.body instanceof ReadableStream,hs=t=>(e,r)=>async s=>{let n=await t.retryStrategy();const i=await t.maxAttempts();if(fs(n)){n=n;let o=await n.acquireInitialRetryToken(r.partition_id),c=new Error,a=0,d=0;const{request:f}=s,u=O.isInstance(f);for(u&&(f.headers[os]=pt());;)try{u&&(f.headers[as]=`attempt=${a+1}; max=${i}`);const{response:l,output:h}=await e(s);return n.recordSuccess(o),h.$metadata.attempts=a+1,h.$metadata.totalRetryDelay=d,{response:l,output:h}}catch(l){const h=ms(l);if(c=ds(l),u&&ls(f))throw(r.logger instanceof Ct?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),c;try{o=await n.refreshRetryTokenForRetry(o,h)}catch{throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=a+1,c.$metadata.totalRetryDelay=d,c}a=o.getRetryCount();const p=o.getRetryDelay();d+=p,await new Promise(g=>setTimeout(g,p))}}else return n=n,n?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",n.mode]]),n.retry(e,s)},fs=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",ms=t=>{const e={error:t,errorType:ps(t)},r=ys(t.$response);return r&&(e.retryAfterHint=r),e},ps=t=>Ze(t)?"THROTTLING":he(t)?"TRANSIENT":ts(t)?"SERVER_ERROR":"CLIENT_ERROR",gs={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},dn=t=>({applyToStack:e=>{e.add(hs(t),gs)}}),ys=t=>{if(!G.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const r=t.headers[e],s=Number(r);return Number.isNaN(s)?new Date(r):new Date(s*1e3)};var rt={name:"SHA-256"},xe={name:"HMAC",hash:rt},Ss=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const ws={};function j(){return typeof window<"u"?window:typeof self<"u"?self:ws}var Es=(function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!pe(e)){var r=ne(e),s=new Uint8Array(this.toHash.byteLength+r.byteLength);s.set(this.toHash,0),s.set(r,this.toHash.byteLength),this.toHash=s}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(r){return j().crypto.subtle.sign(xe,r,e.toHash).then(function(s){return new Uint8Array(s)})}):pe(this.toHash)?Promise.resolve(Ss):Promise.resolve().then(function(){return j().crypto.subtle.digest(rt,e.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(r,s){j().crypto.subtle.importKey("raw",ne(e.secret),xe,!1,["sign"]).then(r,s)}),this.key.catch(function(){}))},t})(),Rs=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function Ts(t){if(bs(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return Cs(e)}return!1}function bs(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function Cs(t){return t&&Rs.every(function(e){return typeof t[e]=="function"})}var ln=(function(){function t(e){Ts(j())?this.hash=new Es(e):this.hash=new at(e)}return t.prototype.update=function(e,r){this.hash.update(ne(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t})();const hn=({serviceId:t,clientVersion:e})=>async r=>{const s=typeof window<"u"?window.navigator:void 0,n=s?.userAgent??"",i=s?.userAgentData?.platform??Ne.os(n)??"other",o=void 0,c=s?.userAgentData?.brands??[],a=c[c.length-1],d=a?.brand??Ne.browser(n)??"unknown",f=a?.version??"unknown",u=[["aws-sdk-js",e],["ua","2.1"],[`os/${i}`,o],["lang/js"],["md/browser",`${d}_${f}`]];t&&u.push([`api/${t}`,e]);const l=await r?.userAgentAppId?.();return l&&u.push([`app/${l}`]),u},Ne={os(t){if(/iPhone|iPad|iPod/.test(t))return"iOS";if(/Macintosh|Mac OS X/.test(t))return"macOS";if(/Windows NT/.test(t))return"Windows";if(/Android/.test(t))return"Android";if(/Linux/.test(t))return"Linux"},browser(t){if(/EdgiOS|EdgA|Edg\//.test(t))return"Microsoft Edge";if(/Firefox\//.test(t))return"Firefox";if(/Chrome\//.test(t))return"Chrome";if(/Safari\//.test(t))return"Safari"}},fn=t=>()=>Promise.reject(t),vs=["in-region","cross-region","mobile","standard","legacy"],mn=({defaultsMode:t}={})=>ct(async()=>{const e=typeof t=="function"?await t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(As()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${vs.join(", ")}, got ${e}`)}}),As=()=>{const t=window?.navigator;if(t?.connection){const{effectiveType:e,rtt:r,downlink:s}=t?.connection;if(typeof e=="string"&&e!=="4g"||Number(r)>100||Number(s)<10)return!0}return t?.userAgentData?.mobile||typeof t?.maxTouchPoints=="number"&&t?.maxTouchPoints>1},pn=t=>({setRegion(e){t.region=e},region(){return t.region}}),gn=t=>({region:t.region()});export{$s as $,Ws as A,tn as B,St as C,cn as D,js as E,ks as F,pn as G,xs as H,gn as I,Ns as J,qs as K,P as L,un as M,De as N,sn as O,Js as P,an as Q,Ms as R,Xs as S,v as T,Is as U,en as V,dn as W,nn as X,Hs as Y,Fs as Z,Bs as _,Os as a,Ds as a0,zs as a1,Us as a2,D as a3,gt as a4,E as b,Se as c,Ks as d,Ps as e,Qs as f,on as g,Q as h,B as i,Vs as j,yr as k,ae as l,Ct as m,Ls as n,mn as o,ce as p,ln as q,Gs as r,wr as s,Zs as t,fn as u,pt as v,ue as w,hn as x,Ys as y,rn as z};
